# The transformation only apply to 
# outputs/gazebo4_transformed/splatfacto/2024-08-05_204928

import numpy as np 

frame1_pose_gt = [
    [0.8380516438206634,-0.2902878055329326,0.46195501106531817,-643.5870811335876],
    [-1.6025088826739652e-16,0.8467058406868381,0.5320612928477269,986.3821236027896],
    [-0.5455909111133396,-0.445894841084385,0.7095832216201615,1315.487922957998],
    [0.0,0.0,0.0,1.0]
]

frame2_pose_gt = [
    [0.8978860619290513,-0.2417503202706265,0.3679095030609964,-614.2608252935024],
    [-2.133238163238067e-16,0.8357250597051481,0.5491480898453773,575.7609662327382],
    [-0.4402279180078654,-0.49307241580712685,0.7503858827140766,786.7511676140264],
    [0.0,0.0,0.0,1.0]
]

frame1_pose_ns = [
    [0.8731055268556582,-0.31759776258670996,0.3698897135282615,0.20072448253631592],
    [0.48373387202602075,0.46983602421738885,-0.7384142816890193,-0.5676578521728527],
    [0.06073121132347789,0.8236417737994552,0.5638492249029612,0.15729453563690135],
    [0.0,0.0,0.0,1.0]
]

frame2_pose_ns = [
    [0.9242579192998183,-0.2660301627078747,0.2738160899969035,0.24124847730000848],
    [0.3762047164240233,0.5126651239454616,-0.7717800736157321,-0.34906584819157815],
    [0.06494081884216447,0.816334749486757,0.5739166026771686,-0.01285827845335039],
    [0.0,0.0,0.0,1.0]
]

dp_trans_info = {
    "transform": [
        [
            0.9947746992111206,
            -0.07210789620876312,
            -0.07227572053670883,
            1278.867919921875
        ],
        [
            -0.07210789620876312,
            0.004931271076202393,
            -0.9973846673965454,
            -75.30574035644531
        ],
        [
            0.07227572053670883,
            0.9973846673965454,
            -0.00029408931732177734,
            -566.6797485351562
        ]
    ],
    "scale": 0.00042486766191778165
}

transform = np.array(dp_trans_info['transform'])
scale_factor = dp_trans_info['scale']

f1_trans_pose = transform@frame1_pose_gt
f1_trans_pose[:3,3] *= scale_factor 

print(f1_trans_pose)
print(frame1_pose_ns)
